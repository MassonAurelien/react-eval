(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[617],{4597:function(t,e,s){(window.__NEXT_P=window.__NEXT_P||[]).push(["/sports",function(){return s(5977)}])},2103:function(t,e,s){"use strict";var r=s(5893),o=s(1664),i=s.n(o);s(7294);var n=s(7547),a=s(5747),l=s(1230),c=s(5746);e.Z=function(t){let{user:e}=t,{Header:s}=a.Z;return(0,r.jsx)(s,{children:(0,r.jsxs)(l.Z,{justify:"space-between",style:{color:"white"},children:[(0,r.jsx)(c.Z,{children:(0,r.jsx)(i(),{href:"/sports",children:(0,r.jsx)("span",{style:{color:"white"},children:"Sports"})})}),(0,r.jsx)(c.Z,{children:(0,r.jsx)(i(),{href:"/dashboard",children:e?"Hello ".concat(e.firstName):(0,r.jsx)(n.Z,{})})})]})})}},8377:function(t,e,s){"use strict";s.d(e,{q:function(){return r}});let r={apiKey:"AIzaSyDDTub9nFHWrbjQeXH4cnZpH6TA2reVuls",authDomain:"react-eval-dfb84.firebaseapp.com",projectId:"react-eval-dfb84",storageBucket:"react-eval-dfb84.appspot.com",messagingSenderId:"1011491258210",appId:"1:1011491258210:web:96ad2a63aef52a70c9763b"}},5977:function(t,e,s){"use strict";s.r(e),s.d(e,{default:function(){return C}});var r=s(5893),o=s(1259),i=s(9828),n=s(3977),a=s(8377),l=s(7294),c=s(2103),u=s(5747),d=s(1230),p=s(888),f=s(9789),h=s(5746),j=s(6521),x=s(5993),S=s(1550),v=s(3718),g=s(598),Z=s(5750);let m=(0,n.ZF)(a.q),b=(0,i.ad)(m),y=t=>{let e,{sport:s,userId:o}=t,[n,a]=(0,l.useState)(s.favorite);return(0,l.useEffect)(()=>{let t=async()=>{console.log(s.idSport,o),n?await (0,i.pl)((0,i.JU)(b,"users",o),{favoritesSports:(0,i.vr)(String(s.idSport))},{merge:!0}):await (0,i.pl)((0,i.JU)(b,"users",o),{favoritesSports:(0,i.Ab)(String(s.idSport))},{merge:!0})};s.favorite!==n&&(o?t():f.ZP.warning("Vous devez \xeatre connect\xe9 pour ajouter un favori"))},[n,o]),e=s.strSportDescription.length>72?s.strSportDescription.slice(0,72)+"...":s.strSportDescription,(0,r.jsx)(h.Z,{xs:24,sm:12,md:8,lg:6,style:{marginBottom:16},children:(0,r.jsx)(j.Z.Ribbon,{text:(0,r.jsx)("span",{style:{fontSize:11},children:s.strFormat}),color:"#008A4E",style:{color:"#ffffff",fontWeight:"bold"},children:(0,r.jsx)(x.Z,{cover:(0,r.jsx)("img",{src:s.strSportThumb,alt:s.strSport}),actions:["",(0,r.jsx)(S.Z,{onClick(){listLeague(s.strSport)}},"list-vertical-star-o"),(0,r.jsx)(S.Z,{type:"link",onClick:()=>a(t=>!t),children:n?(0,r.jsx)(g.Z,{},"like"):(0,r.jsx)(Z.Z,{},"like")})],children:(0,r.jsx)(x.Z.Meta,{avatar:(0,r.jsx)(v.C,{src:s.strSportIconGreen}),title:s.strSport,description:(0,r.jsx)("div",{dangerouslySetInnerHTML:{__html:e}})})})})})},w=t=>{let{data:e,userId:s}=t,[o,i]=(0,l.useState)(!1),[n,a]=(0,l.useState)([]);return((0,l.useEffect)(()=>{e&&e.length>0?(i(!0),a(e)):console.log("Error : No data found")},[e]),(0,l.useEffect)(()=>{n&&n.length>0&&setTimeout(()=>i(!1),1e3)},[n]),o)?(0,r.jsx)("div",{style:{display:"flex",justifyContent:"center",marginTop:40,marginBottom:40},children:(0,r.jsx)(p.Z,{style:{fontSize:24}})}):(0,r.jsx)(d.Z,{style:{padding:32},gutter:16,children:n.map(t=>(0,r.jsx)(y,{sport:t,userId:s},t.idSport))})};var _=s(594);let E=(0,n.ZF)(a.q),k=(0,o.v0)(E),I=(0,i.ad)(E),T=()=>{let[t,e]=(0,l.useState)({}),[s,n]=(0,l.useState)([]),[a,d]=(0,l.useState)([]);(0,l.useEffect)(()=>{let t=async()=>{try{let t=await (0,_.Z)("https://www.thesportsdb.com/api/v1/json/2/all_sports.php");n(t.data)}catch(e){console.error("Impossible de fetch l'api")}};t()},[]),(0,l.useEffect)(()=>((0,o.Aj)(k,async t=>{if(t){let s=await (0,i.QT)((0,i.JU)(I,"users",t.uid));s.exists()&&e({...s.data(),id:t.uid})}}),()=>e({})),[]),(0,l.useEffect)(()=>{var e;(null==t?void 0:t.favoritesSports)&&(null==s||null===(e=s.sports)||void 0===e||e.map(e=>{t.favoritesSports&&t.favoritesSports.includes(String(e.idSport))?d(t=>[...t,{...e,favorite:!0}]):d(t=>[...t,{...e,favorite:!1}])}))},[t]),console.log(t);let{Content:p}=u.Z;return(0,r.jsxs)(u.Z,{children:[(0,r.jsx)(c.Z,{user:t}),(0,r.jsx)(p,{children:(0,r.jsx)(w,{data:(null==a?void 0:a.length)>0?a:s.sports,userId:null==t?void 0:t.id})})]})},N=()=>(0,r.jsx)(T,{});var C=N}},function(t){t.O(0,[597,16,367,90,907,148,774,888,179],function(){return t(t.s=4597)}),_N_E=t.O()}]);